{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container">
    <div class="page-inner">
        <div class="page-header">
            <h3 class="fw-bold mb-3">Application d'une remise</h3>
            <ul class="breadcrumbs mb-3">
                <li class="nav-home">
                    <a href="{% url 'home' %}">
                        <i class="icon-home"></i>
                    </a>
                </li>
                <li class="separator">
                    <i class="icon-arrow-right"></i>
                </li>
                <li class="nav-item">
                    <a href="{% url 'liste_factures' %}">Factures</a>
                </li>
                <li class="separator">
                    <i class="icon-arrow-right"></i>
                </li>
                <li class="nav-item">
                    <span>Remise</span>
                </li>
            </ul>
        </div>

        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title">
                    <i class="bi bi-percent"></i> 
                    Remise pour {{ client.nom }} - {{ mois_nom }}
                </h5>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="{{ form.type_remise.id_for_label }}">Type de remise</label>
                                {{ form.type_remise }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="{{ form.valeur_remise.id_for_label }}">Valeur de la remise</label>
                                {{ form.valeur_remise }}
                                <small class="form-text text-muted">
                                    {% if form.instance.type_remise == 'pourcentage' %}
                                    Entrez un pourcentage entre 0 et 100.
                                    {% else %}
                                    Entrez un montant fixe.
                                    {% endif %}
                                </small>
                                {% if form.valeur_remise.errors %}
                                <div class="alert alert-danger">
                                    {{ form.valeur_remise.errors }}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-lg"></i> Appliquer la remise
                        </button>
                        <a href="{% url 'liste_factures' %}?client={{ client.id }}&mois={{ mois_filtre }}" 
                           class="btn btn-outline-secondary">Annuler</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}